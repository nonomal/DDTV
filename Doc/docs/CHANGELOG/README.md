# 更新日志  
## Ver3.5.1.961
●　修复因为阿B鉴权相关逻辑更新导致可能录制和观看失败的问题  

## Ver3.4.12.950 
●　修复因为阿B提升弹幕鉴权逻辑导致的内容概率性缺失的问题  
●　优化了连接阿B时的请求逻辑与账号鉴权逻辑  
●　优化弹幕录制结束逻辑，不管是取消还是结束都会保存弹幕文件  
●　优化了播放器唤起逻辑，提升播放器性能  

## Ver3.4.11.941  
●　给播放器弹幕绘制增加了描边，眼睛不瞎了~    
●　给单独弹幕窗口增加窗口置顶功能    
●　播放器增加增加按下ESC焦点回到播放器的设定    
●　修复一个特定情况下下播马上开播可能导致漏录的问题    
●　修复一个因为获取房间信息超时导致录制失败的问题    
●　修复弹幕窗口关闭会导致同房间录制弹幕取消的问题    
  
## Ver3.4.9.927  
●　播放器全面支持HLS流模式（用于兼容某些没有FLV流和特殊风控的直播间观看和录制，截至目前DDTV全部功能都支持HLS流功能了）    
●　GUI播放器右键菜单增加“佩戴粉丝牌”功能    
●　GUI播放器新增空格快捷键播放\暂停切换    
●　修复因阿B接口改动导致的弹幕显示\录制失败的问题    
  
  
## Ver3.4.8.923  
●　升级GUI播放器组件    
●　优化GUI的播放器性能，降低硬件使用    
●　优化播放器重连逻辑    
●　解决部分网络环境较差的情况下，添加新房间可能卡住的问题    
  
## Ver3.4.7.922  
●　修复因阿B接口改动导致增加房间失效的问题  
  
## Ver3.4.6.921  
●　【重要】修复查询直播状态接口偶尔抽风导致观看和录制直播失败的问题(最近阿B接口是不是类似问题太多了？)    
  
## Ver3.4.5.917  
●　【重要】紧急修复因阿B更新有BUG导致观看或录制可能失败\报错的问题（一个接口同时返回成功和失败两种状态混淆，你敢信？我是没想到）    
  
## Ver3.4.3.915  
●　【重要】修复一个因为阿B更新导致房间录制任务可能卡住的问题    
●　修复自定义代理地址情况下，弹幕发送功能失败的问题    
●　优化录制时超时的处理机制，让重连更稳定    
●　修复GUI里HLS的等待时间设置为10无法保存的问题    
●　将HLS的录制输出文件名时间修正为任务开始时间    
    
  
## Ver3.4.2.907  
●　新增监控列表右键菜单搜索功能    
●　新增监控列表中Ctrl+F搜索功能    
●　对搜索功能提供房间号、UID、昵称模糊搜索三种模式    
●　修复特定直播间录制产生较多视频碎片的问题    
    
## Ver3.4.1.901  
●　增加[进房提示功能]开关给想默默黑听的人。  
  
## Ver3.4.1.897  
●　增加对[直播中切参数][快速下播上播][极致卡顿推流]等情况的处理，解决时间轴错误和花屏的问题。  
●　增加在阿B返回的主CDN失效无法下载的时候从备选CDN进行下载的兜底逻辑。  
●　增加弹幕和播放窗口云屏蔽词库同步功能。  
●　增加对播放器弹幕发送组件隐藏状态的记忆功能。  
●　增加播放器中弹幕尽量靠上显示的设定。  
●　增加弹幕框的分类筛选功能。  
●　增加强制启动新DDTV实例的功能(防止闪退无法启动)。  
●　增加‘将录制完成的文件名修改为实时标题’的默认设置，并在多文件情况下增加序列号增加辨识度。  
●　增加对于“阿B可能没有返回视频头”导致可能的文件无法解析做逻辑判断进行规避。  
●　优化录制机制，杜绝过小的片段产生。  
●　优化初始弹窗的出现时期。  
●　修复并优化了一些导致卡顿的问题，提高了性能。  
  
## Ver3.3.9.843  
●　修复升级播放窗口时手误导致弹幕可能不显示的问题。  
  
## Ver3.3.8.842  
●　增加付费直播间的单独处理逻辑，防止在免费到付费切换的瞬间断流。  
●　修复弹幕显示录制时会显示两次的问题。  
  
## Ver3.3.7.840  
●　大幅度优化播放窗性能(参考:10秒耗时优化为0.5秒)，优化播放窗缓存逻辑。  
●　增加播放窗口中一种便捷的弹幕发送方式。  
●　增加播放窗增加独立的弹幕查看窗口。  
●　增加‘只看弹幕’功能。  
●　增加了弹幕文件自动转ASS文件格式功能。  
●　优化HLS和FLV的录制逻辑，降低占用和卡顿。  
●　优化主界面的状态提示文本内容，未勾选的留空。  
●　升级UI框架，优化UI刷新和响应速度。  
●　重写了激光切片功能，并适配了HLS模式。  
  
## Ver3.3.6.827  
●　修复了一个因为网络质量问题造成的小主播FLV模式录制可能启动失败或卡死的问题  
●　提升至少一倍HLS录制模式下的录制效率，优化提示内容  
●　优化手动取消任务逻辑，修复特定情况下取消卡住的问题  
●　优化GUI播放器关闭逻辑，提升稳定性防止卡顿  
●　优化录制逻辑，不保存过小(小于1k)的录制碎片  
  
## Ver3.3.5.819  
●　清除在3.3.4中没有屏蔽的测试代码，这个测试代码会导致录制失败！  
  
## Ver3.3.4.818  
●　修复因为阿B的CDN的原因导致FLV录制零碎和缺失的问题  
●　修复一个因为我写错了时间单位导致可能出现两个MP4文件的问题  
  
## Ver3.3.2.816  
●　优化超时处理机制和重连逻辑，提高录制稳定性  
●　增加平铺功能对多屏DPI不同的支持  
●　优化录制完成后的文件处理机制，保证MP4文件的完整性  
  
## Ver3.3.1.806  
●　修复部分播放器打开HLS模式下录制的MP4文件速度很慢的问题  
  
## Ver3.3.0.804  
●　【重要】增加HLS录制的支持(更新后默认启动，设置中可开关)  
●　增加自动平铺功能的多显示器支持  
●　增加黑听模式  
●　增加手动临时录制功能  
●　增加全局音量修改功能  
●　增加录制文件夹格式设置功能  
●　优化网络连接逻辑，提升连接稳定性  
●　优化文件获取接口对于超大文件的支持稳定性  
●　优化HLS视频流的录制逻辑和功能适配  
●　更新播放器组件版本，提升播放器稳定性  
●　更新日志格式，降低日志文件大小  
●　更新[自动更新]功能的触发事件，当前有录制任务时不再触发  
●　优化了很多细小的BUG，提升稳定系  
  
## Ver3.2.18.773  
●　给桌面版增加“正在运行全屏任务时不运行自动更新”的设定  
●　修复因为阿B的服务器变动导致的播放窗口弹幕功能无法使用的问题，修复录制任务弹幕录制失败的问题。  
  
## Ver3.2.17.771  
●　给桌面版弹幕设置窗增加效果预览  
●　给桌面版播放器增加音频solo模式，一键设置其他窗口全部静音  
●　修复添加房时，UID过长会添加失败的问题  
  
## Ver3.2.16.765  
  
●　重构并优化了弹幕绘制方式，并且支持同屏弹幕数量没有上限了(之前是3个窗口)  
●　新增了弹幕的字号、颜色、透明度设置功能  
●　降低了播放器的性能消耗(现在在3950X下同屏13个窗口CPU使用率为4-5%)  
●　提升了播放窗口的稳定性，现在启动窗口和窗口加载资源不会导致软件卡住了  
●　新增双击播放窗口切换全屏模式的功能  
●　新增了多个播放器的预设布局组合方式  
●　新增使用预设布局的情况下可以切换主布局主窗口的功能  
●　新增对桌面缩放率不是100%的情况下播放器自动排布的支持  
●　新增了是否使用系统代理的开关设置  
●　新增了Dev(开发预览版)的更新渠道  
●　新增自动清理过期日志文件的功能(10个文件&超过14天)  
●　修复直播间下播后不提示“已下播”的问题  
●　修复桌面版播放窗口拖动边框大小有可能无效的问题  
●　修复桌面版首页缓存盘容量有可能显示不正确的问题  
●　修复一些可能引起卡顿的BUG和缺陷  
  
  
## Ver3.2.14.734  
●　修复直播下播阿B服务器还会继续发送直播流导硬盘写满的问题  
  
## Ver3.2.13.729  
桌面版(GUI):  
●　给监控列表增加“强制刷新按钮”作为更新UI卡住兜底功能  
●　给播放器增加标题，防止开始菜单一排找不到  
●　监控列表中增加标题列  
●　在录制列表中增加CDN_Host列  
●　修复GUI激光切片功能不能使用的问题  
●　GUI播放窗增加详情查看弹窗  
通用：  
●　增加自定义API代理地址功能  
●　增加API版本选择功能  
●　修复手动取消任务后会再次自动录制的问题  
●　更新本地vtbs数据  
●　修复显示登陆二维码后一直不扫码导致超时报错的问题  
●　修复在重连时取消下载，取消无效的问题  
●　WriteBE自行检测系统端序，在大端序机器（MacOS等）上不进行逆序操作  
●　将SwapBytes改为从.NET Core 2.1起，系统库自带的BinaryPrimitives.ReverseEndianness  
  
## Ver3.2.12.714  
●　增加“是否检测并提示空间不足”功能的开关  
●　修复GUI(桌面版)部分网络连接不稳定导致播放窗口无法关闭的问题  
●　修复弹出扫码登陆的二维码后长时间不登录二维码刷新异常导致的崩溃问题  
●　修复扫码登陆Account中未扫描和已经扫描状态无法准确触发的问题  
●　修复一个登陆失效后不会提示的问题  
●　修改版本号命名规则为：主版本-子版本-修正版本-出包次数  
●　给WEB版“File_GetFilePathList”接口增加文件大小和创建时间数据  
  
## Ver3.0.2.11追加更新内容  
●　增加剩余空间检测和提示功能的开关，防止对于部分用户疯狂提示  
  
## Ver3.0.2.11  
●　修复桌面版右键播放功能不能使用的问题  
●　增加剩余空间判断，如果空间不足给与对应提示  
●　增加防止因为空间不足导致配置文件丢失的操作  
●　修正WEB的“System_Config”接口会返回DDTV敏感配置信息的问题  
  
## Ver3.0.2.10  
●　修复打开自动转码功能后，录制功能会阻塞，无法正常结束录制的问题  
●　增加手动选择文件转码的功能  
●　增加结束任务时得兜底判断，防止主播快速上下播导致没检测到状态变更而录制失败  
●　修复GUI设置录制\临时文件夹时按取消会闪退的问题  
●　修复一个新建任务失败的问题  
●　修复房间录制任务结束后不消失的问题  
  
## Ver3.0.2.9  
●　修复新建\重连任务的时候可能获取到空白URL导致任务错误的问题  
●　修复因为获取到空白URL导致下载任务迟迟不结束，一直不收尾的问题  
  
## Ver3.0.2.8  
●　增加对特殊时期弹幕消息的兼容处理；  
●　修复未开通直播的UID导致报错的问题；  
●　修复了小概率下拨绕过结束录制处理的问题；  
## Ver3.0.2.7  
通用：  
●　优化录制逻辑，修复一个因为没有判断是否已下播导致逻辑卡死的BUG  
●　增强转码功能，现在打开转码功能后，完成任务时的所有FLV文件均会被转码  
●　增加了对MCDN也就是P2P分发流的屏蔽，提高录制稳定性降低碎片概率  
  
GUI:  
●　给下载任务增加了速率显示  
  
CLI\WEB通用:  
●　给控制台菜单中下载任务显示增加了速率显示  
●　增加登陆失效提醒  
●　给控制台中增加重新登陆功能  
●　给不同命令类型增加了颜色区分  
●　优化转码提示消息  
  
WEB:  
●　增加Room_SummaryInfo接口用于返回简要房间配置信息  
  
## Ver3.0.2.6  
通用：  
●　增加通过房间号添加监控列表  
●　增加判断逻辑避免可能存在的时间轴跳跃问题  
●　增加优化FLV零碎文件合并判断逻辑，防止合并导致花屏  
●　增加强制使用主CDN地址进行录制的相关逻辑和配置  
●　优化获取推流地址的方式，提高成功率和录制稳定性  
●　增加vtbs数据协助采集的相关逻辑和配置  
●　增加转码完成后自动删除原始flv文件配置  
●　修复一个昵称为空导致的无法启动的问题  
  
## Ver3.0.2.5  
●　修复弹幕录制储存失败的问题  
  
## Ver3.0.2.4  
●　修复因为阿B弹幕接口改动导致弹幕录制失败的问题  
●　WEB增加File_GetFilePathList接口用于根据路径结构生成文件树json返回文件信息  
  
## Ver3.0.2.3  
●　修复了一个因为阿B接口变动导致录制可能失败的问题  
  
## Ver3.0.2.2  
通用：  
●　给登陆逻辑增加重试和错误处理方法  
●　优化日志系统降低占用率  
●　修复一个视频流地址问题导致录制失败的问题  
●　修复flv文件流指向可能错误导致小概率出现花屏的问题  
●　优化取消下载的逻辑提高取消任务操作的可靠性  
  
GUI:  
●　优化GUI设置储存路径的操作和UI  
●　重构了房间状态算法，提升检测稳定性  
●　增加对输入的UID检测防止用户输入错误的UID导致崩溃  
●　更新播放组件LibVLCSharp版本到3.6.6  
●　GUI优化激光剪辑功能，提升可用度  
●　优化GUI播放界面弹幕连接的方式提高流畅度防止卡顿  
●　修复和优化了很多性能上的问题  
  
CLI|WEB:  
●　WEB修改所有API地址返回值为标准Json  
●　修复WEBConfig_FileSplit接口设置自动切片无效的问题；修复WEB的Origin设置被写死为*号的问题  
●　修复WEB模式下API的sig鉴权失败返回信息因为编码问题导致意核心服务外退出的问题  
●　WEB增加“Login_State”和”Login_Reset”接口用于查询登陆的状态和重新登陆  
●　修正sig校验失败后为直接返回对应的json数据而不是进行302跳转  
●　修改loginqr读取登陆二维码用流的形式以减少图形库的依赖  
●　增加了WebHook功能  
●　给每个房间都增加下载完成后执行不同的指定Shell命令功能  
  
  
其他（日志中没写的【修复和优化】的内容）：  
●　新增启动程序时初始化所有配置信息到配置文件中的功能  
●　配置文件统一收口到到Core中  
●　增加了登陆状态的控制台提示  
●　对控制台操作台的数据进行了表格化  
●　新增控制台直接打印二维码的功能  
●　优化登陆逻辑，更改二维码生成方式以适配更多linux环境  
●　修复启动分P功能后依旧能打开激光切片的问题  
  
  
## Ver3.0.2.1  
通用：  
●　加强了录制弹幕文件的XML的特殊字符解析功能  
●　对整体数据结构进行了优化，整体性能提升至少3倍，并且对CPU和内存的使用减少60%以上  
●　优化缓存和配置文件的更新方法为Create方式  
●　增加了暂停系统休眠的开关选项和配置  
●　修复了一些造成稳定性问题的BUG  
  
GUI:  
●　增加了更方便阅读的新主界面  
●　优化弹幕发送方式为异步防止界面卡顿  
●　优化监控列表排序为字母顺序排序，提升可读性  
  
WEB:  
●　增加CookieDomain配置  
●　修复录制列表可能返回重复条目的问题  
●　给System_Config接口增加参数用于隐藏敏感数据  
●　修复在特定条件下鉴权功能无效的问题  
●　增加了File_GetTypeFileList和User_Search接口  
  
## Ver3.0.1.9  
● 增加隐藏到托盘开关选项，是否隐藏到托盘可以在设置中进行修改了  
● 增加了GUI模式下双击直播中的房间直接打开播放窗口的功能  
● 修复了文件路径有空格时转码失败的问题  
  
## Ver3.0.1.7  
● 修复了一个网络环境复杂情况下可能导致的文件下载被403拒绝的问题（感谢@hanximeng 提供反馈）  
● 给GUI增加了开播\录制提示音效  
● 对新建任务的逻辑进行了优化，增加了开播的反应速度  
  
## Ver3.0.1.6  
● 本次更新从头到尾使用.NET6对DDTV进行了完全重构，版本号升级到3开头，并且增加了非常多的新功能和提高的稳定性，现已开放下载。  
  
  
## Ver3.0.0.0-Ver3.0.1.5  
● Ver3.0.0.0-Ver3.0.1.5为完全重构的测试特殊版本，仅做功能验证和提供给开发人员测试，未推送更新  
  
## Ver2.0.6.1b  
  
● 本次更新为基于 .NET Framework 4.7.2开发的DDTV和基于.NET5开发的DDTVLiveRec的最后一次功能性更新，更新了很多重大功能，强烈推荐更新！  
● 接下来我会使用.NET6进行完整的重构和优化，敬请期待。  
  
本次更新内容如下：  
  
【通用更新】  
● 增加了官网和对应的说明文档，请访问[ddtv.pro]查看  
● 增加转码完成后自动删除原始flv文件的功能和对应的配置文件  
● 修改文件保存路径和文件名为:{ROOMID}_{NAME}/{DATE}_{TITLE}_{TIME}_{R}.x  
  
【DDTV专属更新】  
● 通用更新的全部内容  
● 修复历史已知BUG  
● 优化数据结构增强稳定性  
  
【DDTVLiveRec专属更新】  
● 通用更新的全部内容  
● 增加录制完成自动上传到云端功能  
● 增加API接口支持  
● 增加了Webhook功能  
● 增加了WebSocket服务器，支持API全走WS服务器  
● 给DDTVLiveRec增加了提示提示更新和一键更新脚本  
● 给WebSocket服务器增加了证书支持  
● 部分设置支持使用API进行热重载了  
● 为DDTVLiveRec增加了全新的Web界面，替换原来的简单信息页  
● 增加了全新的文件管理逻辑  
● 支持了转码进度展示功能  
● 增加了弹幕和礼物记录文件随着录制文件同步上传到云端功能  
● 增加了全新的DDTVLiveRec服务端WEB页支持"  
  
## Ver2.0.5.2a-Ver2.0.6.1a  
● Ver2.0.5.2a-Ver2.0.6.1a为特殊版本，仅做功能验证和提供给开发人员测试，未推送更新，累计更新日志累计到`Ver2.0.6.1b `中  
  
## Ver2.0.5.1c  
通用更新内容  
● 【重要】修复因逻辑错误导致FLV文件合并失败和文件名为临时编号的问题  
● 【重要】修复继承(重连)下载文件路径的错误问题  
● 修复tmp文件存在判断错误  
● 修复downloader中目录检测错误  
● 优化初始化目录检测；避免因配置文件中目录未以/结尾导致的路径识别错误  
  
DDTV专属内容  
● 增加输入框输入完成后回车发送弹幕的功能  
● 修复DDTV弹幕输入框无法输入字母\字符的问题  
● 修复DDTV点击弹幕输入框后全局快捷键可能会失效的问题  
● 通用更新内容  
  
DDTVLiveRec专属内容  
● 通用更新内容  
  
## Ver2.0.5.1b  
DDTV专属内容  
● 修复部分系统环境下渲染层级出错导致的部分环境下播放窗口不能拖动\回车全屏无效\回车闪烁的问题  
● 优化部分设备在网络环境太差的时候可能会崩溃的部分问题  
● 优化连接速度  
  
DDTVLiveRec专属内容  
● 修复DDTVLiveRec在启动后不会自动录制已经正在直播房间的问题  
● 增加加载SSL证书相关的代码  
● 增加全局SSL配置支持  
● 增加初始化提醒和控制台信息SSL证书相关内容  
● 增加配置文件的控制台心跳间隔时间配置(DokiDoki)  
● web服务修改为检测到SSL证书后自动跳转HTTPS  
● 优化房间长连接模式WSS连接逻辑  
  
通用更新内容  
● 优化初始化提示内容和修复错误的描述文字  
● 优化本地缓存文件结构和数量  
## Ver2.0.5.0d  
● 增加高分辨率下缩放非100%的时候播放窗口的一键界面自动排序功能支持  
● 修复播放窗口刚开始缓冲就关闭窗口导致的重复音问题  
● 修复播放窗口初始化完成前设置音量无效的问题  
● 修复转码时会把合并生成的临时文件也转码的问题  
● 修复一个初始化加载网络延迟高引起的一键添加房间失败的问题  
● 优化web页面路由  
● 优化API和CDN性能  
● 进一步优化播放窗口消耗的CPU和内存  
  
## Ver2.0.5.0b  
● 增加播放窗口一键屏幕自适应排列功能  
● 修复因为把播放窗口交给GPU渲染造成全屏下按下回车无法退出全屏的问题；  
● 优化播放缓存清空机制  
● 优化VTB一键导入逻辑  
  
## Ver2.0.5.0a  
【史诗级加强更新！】  
● 支持阿B全部直播间的监控，vtbs没有数据也没关系  
● 修改播放器核心，播放器支持GPU硬解了，解放CPU，使用率降低，流畅+++  
● DDTVLiveRec可以直接在web播放录制的视频了  
● 增加web的鉴权系统  
  
【通用更新内容】  
● 添加Docker的支持  
● 添加在Linux/MacOS上的转码支持  
● 增加一种阿B原生API房间直播状态轮询机制  
● 房间配置文件增加对于UID的配置缓存  
● 优化缓存系统的格式和统一缓存头标识  
● 缩短直播状态的状态机轮询默认时间  
● 增加轮播状态的识别防止误判  
● 增加混合模式API获取机制和对应的欢迎界面  
● 优化房间监控状态机，消除房间状态区别壁垒，所有房间均可随意路数监控  
  
【DDTV独享更新内容】  
● 完全修改播放器核心代码，播放器支持GPU硬解，解放CPU软解  
● 增加全站的房间监控功能  
  
【DDTVLiveRec独享更新内容】  
● 增加WEB页面鉴权系统  
● 增加WEB下载文件页面可以直接播放视频的功能  
  
## Ver2.0.4.8.b  
【重要】修复一个合并flv文件错误导致文件合并错误和录制文件丢失的重大BUG  
  
【通用的更新内容】  
增加文件删除前的判定，防止误删文件。  
增加合并flv后文件防重名的判断。  
增加文件删除委托日志记录。  
增加对于已经过期的日志文件自动删除的逻辑代码。  
修改所有文件删除任务通过文件删除委托进行删除。  
  
【DDTV的更新内容】  
优化播放窗口的弹幕/字幕加载逻辑  
  
## Ver2.0.4.8.a  
本版本主要是针对录制文件管理代码进行升级，推荐更新。  
  
【通用的更新内容】  
增加文件删除前的判定，防止误删文件。  
增加合并flv后文件防重名的判断。  
增加文件删除委托日志记录。  
增加对于已经过期的日志文件自动删除的逻辑代码。  
修改所有文件删除任务通过文件删除委托进行删除。  
  
【DDTV的更新内容】  
优化播放窗口的弹幕/字幕加载逻辑  
  
## Ver2.0.4.7b  
升级播放器核心版本到Vlc 3.1.0  
修复因为阿B接口连接超时获取标题失败导致的文件名为空的错误  
修复因为文件名为空可能导致的文件生成失败或文件隐藏的问题  
增加配置文件初始化时房间配置文件错误的提示  
增加开发模式  
  
## Ver2.0.4.7a  
增加了网络状态异常导致下载错误的问题处理机制，现在就算拔掉网线再插上都能正常续传了  
增加了运营商IP地址租期到期或者DHCP从新分配IP操作引发的录制终端问题处理机制，强化续传功能  
增加DDTVLiveRec日志里的版本更新提示  
修改续传产生多个flv文件合并为录制结束后统一合并，加快续下重连录制速度  
修复下载详情内容中时间显示偶尔时区错误的问题  
修复首页数据源延迟检测显示错误的问题  
优化主播在短时间内多次上下播操作时有概率建立多个同房间录制任务的问题  
优化同步任务进程防止不同进程之间信息延迟导致录制重复。  
  
## Ver2.0.4.6c  
【重要】针对阿B这两天的API接口变动，进行优化，确保录制功能正常  
修复了播放窗口关闭后有概率后台不会停止继续缓冲的问题  
修复了主界面数据源服务器延迟检测显示错误的问题  
  
## Ver2.0.4.6a  
【重要】应对阿B修改连接限制，对长连接方式和数量进行修改，修复了V直播房间监控异常的问题  
增加DDTVLiveRec对于录制保存路径的设置  
增加阿B心跳包规则解析V2  
增加新的缓存优化机制，减少原生API调用次数  
增加debug模式，打开后会输出日志信息  
  
修改录制的弹幕文件文件名称，保持和视频信息一致  
  
优化弹幕录制记录的信息内容  
优化内存使用量，增加长时间运行稳定性  
优化代码结构和部分UI的描述文字信息  
优化房间直播状态监控逻辑  
  
## Ver2.0.4.5c  
【重要】修复一个网络不稳定的时候重连导致DDTV崩溃的问题  
  
从该版本开始，DDTVLiveRec的releases只提供依赖框架的可移植版本，请确保环境已经安装.NET5的运行时(.NET5.0 runtime)  
如未安装不能启动，请到参考微软文档进行运行时的安装后运行DDTVLiveRec  
  
## Ver2.0.4.5b  
===增加功能===  
WEB界面增加系统信息总览和自动更新页面信息功能  
增加支持MacOS系统使用DDTVLiveRec录制功能  
在增加监控的房间为特殊短号时，会自动解析为正确房间号  
核心框架升级为.NET5.0  
增加DDTVLiveRec手机短信验证码登陆的方式  
增加且修改默认弹幕录制通用的xml文件  
增加了房间配置文件修改程序  
===修改功能===  
完善断线重连录制功能  
分离DDTVLiveRec的登陆方式为短信登陆  
优化新建和下载任务的重连机制  
修正控制台和网页输出的任务开结束时间描述错误  
优化了DDTVLiveRec的录制内存分配机制  
  
  
  
  
## Ver2.0.4.3c  
修正了提示文字的错误  
  
## Ver2.0.4.3b  
【！重要！不管是DDTV还是DDTVLiveRec，只要是需要录制的用户都强烈推荐更新】  
  
修复了一个主播推流诡异操作流程会导致的录制失败的问题(感谢团长11月2号下午的麦克风((  
  
优化了一下部分UI和描述的文字信息  
  
## Ver2.0.4.3a  
增加非VTB(全阿B直播)的监控功能代码和UI  
增加录制弹幕储存功能  
增加礼物记录和上舰记录  
增加超管警告记录  
增加阿BWSS链接CDN自适应  
增加VTBS自适应CDN优化  
增加wss监控异常过后的重连功能  
增加DDTVLiveRec配置页面  
  
修复手动选择下载会异常提示提示未开播或加密的问题  
修复关闭播放窗口时进行缓存清理因为文件锁时可能导致闪退的问题  
修复了下载完成后可能还一直提示下载中的问题  
  
优化阿B直播间监控启动逻辑，vtbs数据和wss请求异步并行请求  
优化VTBS数据交互逻辑  
优化部分代码结构  
  
以及增加了整体稳定性和修复了一些细小的逻辑bug  
  
## Ver2.0.4.1a  
增加了非VTB\VUP(在VTBS数据库中未记录的直播间)的直播监控和观看录制功能  
增加了观看和录制过程中对直播间的弹幕进行录制保存为ass文件的功能  
增加DDTV服务器集群，支持热切换  
增加了阿B弹幕的多版本支持  
增加了配置文件中多个可修改项  
增加了DDNA数据源和主要数据源错误自动切换的功能  
增加了DDTVLiveRec环境下配置文件中WebServer的默认监听IP修改功能，方便服务端用户反代  
  
升级了外部BiliAccount依赖，登陆特征升级为安卓6.5.0  
  
修复了登陆二维码可能失效显示空白的问题  
修复了多个DDTVListRec意外错误导致崩溃的问题  
修复了在特殊系统版本下，系统默认浏览器缺失导致的Process打开网页报错的问题  
修复了关闭播放窗口后，下载界面还是显示【下载中】的问题  
修复DDTVLiveRec启动后房间配置文件被清空的问题  
  
优化了启动流程和部分参数初始化错误的问题  
  
以及增加了整体稳定性和修复了一些细小的逻辑bug  
  
## Ver2.0.3.3a  
增加了第一次使用的引导界面  
增加数据源切换配置  
增加了多重数据缓存和自建服务器备用数据源  
增加第三方接口说明  
  
优化了一堆代码和修复了一些小bug  
  
## Ver2.0.3.1a  
【重要变动】  
（づ￣3￣）づ╭❤～从这个版本开始，增加了自动更新，只要没有巨大到现在的我无法想象的变动，都可以自动更新了  
增加了多个数据源，主要数据源修改为https://vtbs.moe/ ,不再高强度调用阿B的API防止被拉黑  
新增监控列表修改为跳转到vtbs新增页面，数据导入统一从vtbs导入  
  
其他变动  
修复播放窗口标题为空的问题  
如果vtbs数据源持续获取失败的情况下会自动切换至使用阿BAPI获取直播状态数据(频率降低，约0.8秒获取一个房间状态，一直循环)  
增加了文件同步组件  
增加了文件损坏修复功能  
  
## Ver2.0.2.4a  
【重要变动】  
增加了多个数据源，主要数据源修改为https://vtbs.moe/ ，不再高强度调用阿B的API防止被拉黑  
新增监控列表修改为跳转到vtbs新增页面，数据导入统一从vtbs导入  
  
新增  
增加DD@Electron相关功能代码，分布式大数据平台，可访问https://vtbs.moe/ 查看  
增加初级数据缓存功能，部分数据将使用本地缓存，进一步减少网络请求频率  
  
修改  
修改弹幕获取使用ClientWebSocket作为连接方式  
修改了登陆二维码在某些情况下无法扫描的问题  
  
## Ver2.0.2.3b  
重要修复:  
修复了因为码云服务器策略修改导致的一键导入全部失败的问题，现在可以继续【一键导入】了！  
限制了对于房间信息API的调用次数，防止API调用次数过多被屏蔽  
  
增加  
youtube开播提醒和一键跳转到youtube页面  
  
## Ver2.0.2.3a  
增加  
youtube开播提醒和一键跳转到youtube页面  
  
！！重要修复！！:  
限制了对于房间信息API的调用次数，防止API调用次数过多被屏蔽  
  
## Ver2.0.2.2b  
增加  
在DDTVLiveRec中增加了扫码登陆功能  
  
修改  
**重要**：修复了如果登陆信息失效，导致房间列表异常的情况  
修复了系统语言不是简体中文的情况时下载\缓冲异常  
  
## Ver2.0.2.2a  
增加:  
DDTVLiveRec项目(需要单独下载)，一个纯粹的自动录制下载工具，支持windows,linux(x64，ARM)，macOS，也就是路由器，树莓派什么的也可以录制啦  
断流续下后自动合并Flv文件的功能  
录制结束后自动转码为MP4文件并修复时间轴  
全新的消息文件系统  
提供日志和下载文件状态查看功能的网页功能  
  
修改:  
从之前的 `只录制启动后开播的视频流` 修改为`动后会马上根据配置列表开始录制`  
下载系统更新为2.0  
修复登陆后一键导入失效的问题  
修复设置界面的输入框输入困难的问题  
优化稳定性和修复了一箩筐的彩蛋(bug)  
  
## Ver2.0.2.1d  
2.0.2.1d对比2.0.2.0c更新内容  
【修复一直下载\播放缓冲的问题】用新的API和参数获取播放地址，彻底解决卡顿问题，如果再卡，真的是推流的问题了  
  
2.0.2.1对比2.0.2.0更新内容  
增加:  
1.增加基于网络的一键监控功能。可以使用vtbs.moe的网络数据进行一键增加监控列表，不用手动填写了。  
2.增加了扫码登陆功能，理论上购买过付费直播门票的用户登陆后也可以使用DDTV进行观看(已测试)  
3.增加了登陆后根据关注列表一键导入关注列表中的VTB和VUP  
4.增加了弹幕发送功能  
5.增加了播放前缓冲时长修改，预防网络状况不好的情况下经常缓冲的情况  
6.增加了一键清除“下载列表已经完成\取消的项目”功能  
7.把阿B账号登陆cookie缓存单独储存为"biliuser.ini"配置文件，分享软件时请注意删除  
  
修改:  
1.现在主窗口监控列表只有在变化的时候才会刷新了，不会频繁刷新了。  
2.自动\手动录制\播放连接失败的情况下，会自动重试，如果失败后会有气泡提示  
3.播放窗口的文本【锁定顶层】修改为【窗口置顶】  
4.文件命名方式从“直播名称-GUID随机码”修改为了“直播名称-文件生成时间(格式yyyyMMddHHmmssfff)”  
  
已知的问题  
1.在正在播放的窗口中只有最先打开的窗口是使用CPU硬件解码，后面打开的播放窗口将会因为是软件解码模式而使用更多系统资源，当使用的资源达到某个系统瓶颈后可能卡顿(老版本都存在这个问题)  
  
## Ver2.0.2.1c  
2.0.2.1c对比2.0.2.1b更新内容  
【重要重要】修复了录制和播放不断重试连接异常的问题，保证了大多数直播间的稳定下载和播放  
  
2.0.2.1对比2.0.2.0更新内容  
增加:  
1.增加基于网络的一键监控功能。可以使用vtbs.moe的网络数据进行一键增加监控列表，不用手动填写了。  
2.增加了扫码登陆功能，理论上购买过付费直播门票的用户登陆后也可以使用DDTV进行观看(已测试)  
3.增加了登陆后根据关注列表一键导入关注列表中的VTB和VUP  
4.增加了弹幕发送功能  
5.增加了播放前缓冲时长修改，预防网络状况不好的情况下经常缓冲的情况  
6.增加了一键清除“下载列表已经完成\取消的项目”功能  
7.把阿B账号登陆cookie缓存单独储存为"biliuser.ini"配置文件，分享软件时请注意删除  
  
修改:  
1.现在主窗口监控列表只有在变化的时候才会刷新了，不会频繁刷新了。  
2.自动\手动录制\播放连接失败的情况下，会自动重试，如果失败后会有气泡提示  
3.播放窗口的文本【锁定顶层】修改为【窗口置顶】  
4.文件命名方式从“直播名称-GUID随机码”修改为了“直播名称-文件生成时间(格式yyyyMMddHHmmssfff)”  
  
已知的问题  
1.在正在播放的窗口中只有最先打开的窗口是使用CPU硬件解码，后面打开的播放窗口将会因为是软件解码模式而使用更多系统资源，当使用的资源达到某个系统瓶颈后可能卡顿(老版本都存在这个问题)  
  
## Ver2.0.2.1b  
【重要】修复了一个错误的缓冲bug，会导致后台不断重复新建下载任务  
  
2.0.2.1b比较2.0.2.0更新内容：  
增加:  
1.增加基于网络的一键监控功能。可以使用vtbs.moe的网络数据进行一键增加监控列表，不用手动填写了。  
2.增加了扫码登陆功能，理论上购买过付费直播门票的用户登陆后也可以使用DDTV进行观看(已测试)  
3.增加了登陆后根据关注列表一键导入关注列表中的VTB和VUP  
4.增加了弹幕发送功能  
5.增加了播放前缓冲时长修改，预防网络状况不好的情况下经常缓冲的情况  
6.增加了一键清除“下载列表已经完成\取消的项目”功能  
7.把阿B账号登陆cookie缓存单独储存为"biliuser.ini"配置文件，分享软件时请注意删除  
  
修改:  
1.现在主窗口监控列表只有在变化的时候才会刷新了，不会频繁刷新了。  
2.自动\手动录制\播放连接失败的情况下，会自动重试，如果失败后会有气泡提示  
3.播放窗口的文本【锁定顶层】修改为【窗口置顶】  
4.文件命名方式从“直播名称-GUID随机码”修改为了“直播名称-文件生成时间(格式yyyyMMddHHmmssfff)”  
5.增加了快捷键说明  
  
已知的问题  
1.在正在播放的窗口中只有最先打开的窗口是使用CPU硬件解码，后面打开的播放窗口将会因为是软件解码模式而使用更多系统资源，当使用的资源达到某个系统瓶颈后可能卡顿(老版本都存在这个问题)  
  
## Ver2.0.2.1  
增加:  
1.增加基于网络的一键监控功能。可以使用vtbs.moe的网络数据进行一键增加监控列表，不用手动填写了。  
2.增加了扫码登陆功能，理论上购买过付费直播门票的用户登陆后也可以使用DDTV进行观看(已测试)  
3.增加了登陆后根据关注列表一键导入关注列表中的VTB和VUP  
4.增加了弹幕发送功能  
5.增加了播放前缓冲时长修改，预防网络状况不好的情况下经常缓冲的情况  
6.增加了一键清除“下载列表已经完成\取消的项目”功能  
7.把阿B账号登陆cookie缓存单独储存为"biliuser.ini"配置文件，分享软件时请注意删除  
  
修改:  
1.现在主窗口监控列表只有在变化的时候才会刷新了，不会频繁刷新了。  
2.自动\手动录制\播放连接失败的情况下，会自动重试，如果失败后会有气泡提示  
3.播放窗口的文本【锁定顶层】修改为【窗口置顶】  
4.文件命名方式从“直播名称-GUID随机码”修改为了“直播名称-文件生成时间(格式yyyyMMddHHmmssfff)”  
5.增加了快捷键说明  
  
已知的问题  
1.在正在播放的窗口中只有最先打开的窗口是使用CPU硬件解码，后面打开的播放窗口将会因为是软件解码模式而使用更多系统资源，当使用的资源达到某个系统瓶颈后可能卡顿(老版本都存在这个问题)  
  
## Ver2.0.2.0f  
增加:  
-3.增加基于网络的一键监控功能。可以使用vtbs.moe的网络数据进行一键增加监控列表，不用手动填写了。  
-2.增加了扫码登陆功能，理论上购买过付费直播门票的用户登陆后也可以使用DDTV进行观看(待测试)  
-1.增加了登陆后根据关注列表一键导入关注列表中的VTB和VUP  
0.增加了监控列表的一键同步服务端列表功能  
1.增加了弹幕透明度调整功能，现在可以调整HD高清弹幕透明度了  
2.更改了播放窗口设置按钮的排序界面，修复\兼容了小播放窗口重叠的问题  
3.修复了在播放窗口自动\手动F5刷新过后弹幕不会继续加载的问题  
4.修复了DDNA获取当前直播状态错误的问题  
5.修复了几个可能导致DDTV崩溃的性能问题  
6.姑且增加了定时回收功能，稍微降低了内存使用  
7.提高了一点(一丢丢)性能方面的问题  
  
已知的问题  
1.在正在播放的窗口中只有最先打开的窗口是使用CPU硬件解码，后面打开的播放窗口将会因为是软件解码模式而使用更多系统资源，当使用的资源达到某个系统瓶颈后可能卡顿(老版本都存在这个问题)  
  
## Ver2.0.2.0d  
0.增加了监控列表的一键同步服务端列表功能  
1.增加了弹幕透明度调整功能，现在可以调整HD高清弹幕透明度了  
2.更改了播放窗口设置按钮的排序界面，修复\兼容了小播放窗口重叠的问题  
3.修复了在播放窗口自动\手动F5刷新过后弹幕不会继续加载的问题  
4.修复了DDNA获取当前直播状态错误的问题  
5.修复了几个可能导致DDTV崩溃的性能问题  
6.姑且增加了定时回收功能，稍微降低了内存使用  
7.提高了一点(一丢丢)性能方面的问题  
  
已知的问题  
1.在正在播放的窗口中只有最先打开的窗口是使用CPU硬件解码，后面打开的播放窗口将会因为是软件解码模式而使用更多系统资源，当使用的资源达到某个系统瓶颈后可能卡顿(老版本都存在这个问题)  
2.修改监控列表的时候会提示错误的开播信息(只是提示一下，没其他影响)  
3.录制停止和播放黑屏应该和DDTV没关系，大概率是网络环境问题...  
  
## Ver2.0.2.0  
1.增加了弹幕透明度调整功能，现在可以调整HD高清弹幕透明度了  
2.更改了播放窗口设置按钮的排序界面，修复\兼容了小播放窗口重叠的问题  
3.修复了在播放窗口自动\手动F5刷新过后弹幕不会继续加载的问题  
4.修复了DDNA获取当前直播状态错误的问题  
4.修复了几个可能导致DDTV崩溃的性能问题  
5.姑且增加了定时回收功能，稍微降低了内存使用  
6.提高了一点(一丢丢)性能方面的问题  
  
已知的问题  
1.在正在播放的窗口中只有最先打开的窗口是使用CPU硬件解码，后面打开的播放窗口将会因为是软件解码模式而使用更多系统资源，当使用的资源达到某个系统瓶颈后可能卡顿(老版本都存在这个问题)  
2.修改监控列表的时候会提示错误的开播信息  
3.录制停止和播放黑屏应该是网络环境问题.  
  
## Ver2.0.1.6  
2.0.1.6更新内容  
1.修复了DDNA(正在直播概况)被油管背刺无法现在正在直播的列表的问题，现在可以显示正在直播的列表了  
2.把瞎眼的弹幕和字幕显示给控件重绘了，现在可以看高清(HD描边)字幕了.jpg  
3.增加了路人字幕位置设置，在播放界面可以左右拖动  
4.修复了几个可能造成软件崩溃的问题  
5.提高了一点(一丢丢)性能方面的问题  
6.在exe.config配置文件里增加了“LiveListTime”关键值,直播表的刷新时间将由这个值来决定(整数,单位:秒)  
  
已知的问题  
1.在正在播放的窗口中只有最先打开的窗口是使用CPU硬件解码，后面打开的播放窗口将会因为是软件解码模式而使用更多系统资源，当使用的资源达到某个系统瓶颈后可能卡顿(老版本都存在这个问题)  
  
## Ver2.0.1.5  
增加：  
1.增加了默认播放窗口大小设置：在“设置”中可以设置默认的播放窗口大小。  
2.增加了 Control+D 的老板键，在任意播放窗口按下后最小化DDTV的所有窗口  
  
修改：  
1.修改了“开播提示”和“录制提示”的提示内容：被人说太程序员语言...(小声BB(可是我是美术生啊(PS:本条划掉，到最后都没人给我说应该怎么改)  
  
修复：  
1.修复了一个 系统使用率高\网络卡顿 的情况下播放窗口陷入死循环导致无响应的逻辑问题。  
2.修复了一个“下载完成”后续处理中造成程序崩溃\闪退的逻辑问题。  
3.修复了下载完成\取消下载后，下载窗口的下载状态显示错误的问题。  
  
## Ver2.0.1.4  
1.修复了直播列表“修改”按钮修改后会导致修改的房间/频道被删除问题  
2.修复了添加和修改房间/频道设置的时候会重置直播状态的问题  
3.修复了“关于”列表中，蒂蒂媞薇立绘过于死板的问题。增加了新的表情。  
